---
version: v2
kind: alert
metadata:
  name: cassandra-load
spec:
  formula: |
    groups:
    - name: cassandra-load-alert
      rules:
      - record: cassandra_load:percent_diff
        expr: 100.0 - ((cassandra_load_min * 100.0) / cassandra_load_max > 1073741824)
      - alert: cassandra-load
        annotations:
          message: "Cassandra: storage load is different between nodes"
        expr: cassandra_load:percent_diff >= 30.0
        for: 30
        labels:
          severity: critical
